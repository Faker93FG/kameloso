<!DOCTYPE html>
<html lang="en">
<head>
        <title>SeenPlugin (kameloso.plugins.seen.SeenPlugin)</title>
	<meta charset="utf-8" />
	<meta content="width=device-width, initial-scale=1" name="viewport" />
        <link href="style.css" rel="stylesheet" />
        <script src="script.js" type="text/javascript"></script>

	
	<link href="search-results.html" rel="prefetch" />
</head>
<body>
	<div id="page-header">
		<div id="logotype">
		<span>kameloso IRC bot</span>
		<nav>
			<a href="http://dlang.org/">Dlang.org</a>
		</nav>
		</div>

		<form action="search-docs.html" id="search">
			<input name="searchTerm" placeholder="Find a symbol name..." type="search" />
			<input type="submit" value="Go" />
		</form>
	</div>
	<div id="page-body">
		<div id="page-content">
		<h1>SeenPlugin</h1><div class="breadcrumbs"><a class="breadcrumb" href="kameloso.html">kameloso</a> <a class="breadcrumb" href="kameloso.plugins.html">plugins</a> <a class="breadcrumb" href="kameloso.plugins.seen.html">seen</a> </div><div><div class="documentation-comment synopsis"><div><p>This is your plugin to the outside world, the only thing visible in the
    entire module. It only serves as a way of proxying calls to our top-level
    private functions, as well as to house plugin-private variables that we want
    to keep out of top-level scope for the sake of modularity. If the only state
    is in the plugin, several plugins of the same kind can technically be run
    alongside each other, which would allow for several bots to be run in
    parallel. This is not yet supported but there's nothing stopping it.</p><p>As such it houses this plugin's *state*, notably its instance of
    <a class="xref" href="kameloso.plugins.seen.SeenSettings.html">SeenSettings</a> and its <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.html">kameloso.plugins.common.core.IRCPluginState</a>.</p><p>The <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.html">kameloso.plugins.common.core.IRCPluginState</a> is a struct housing various
    variables that together make up the plugin's state. This is where
    information is kept about the bot, the server, and some metathings allowing
    us to send messages to the server. We don't define it here; we mix it in
    later with the <a class="xref" href="kameloso.plugins.common.core.IRCPluginImpl.html">kameloso.plugins.common.core.IRCPluginImpl</a> mixin.</p><pre class="d_code highlighted with-line-wrappers"><span class="br">1 </span><span class="kwrd">struct</span> <span class="hid">IRCPluginState</span>
<span class="br">2 </span>{
<span class="br">3 </span>    <span class="hid">IRCClient</span> <span class="hid">client</span>;
<span class="br">4 </span>    <span class="hid">IRCServer</span> <span class="hid">server</span>;
<span class="br">5 </span>    <span class="hid">IRCBot</span> <span class="hid">bot</span>;
<span class="br">6 </span>    <span class="hid">CoreSettings</span> <span class="hid">settings</span>;
<span class="br">7 </span>    <span class="hid">ConnectionSettings</span> <span class="hid">connSettings</span>;
<span class="br">8 </span>    <span class="hid">Tid</span> <span class="hid">mainThread</span>;
<span class="br">9 </span>    <span class="hid">IRCUser</span>[<span class="type">string</span>] <span class="hid">users</span>;
<span class="br">10 </span>    <span class="hid">IRCChannel</span>[<span class="type">string</span>] <span class="hid">channels</span>;
<span class="br">11 </span>    <span class="hid">Replay</span>[][<span class="type">string</span>] <span class="hid">replays</span>;
<span class="br">12 </span>    <span class="type">bool</span> <span class="hid">hasReplays</span>;
<span class="br">13 </span>    <span class="hid">Repeat</span>[] <span class="hid">repeats</span>;
<span class="br">14 </span>    <span class="hid">Fiber</span>[][] <span class="hid">awaitingFibers</span>;
<span class="br">15 </span>    <span class="type">void</span> <span class="kwrd">delegate</span>(<span class="kwrd">const</span> <span class="hid">IRCEvent</span>)[][] <span class="hid">awaitingDelegates</span>;
<span class="br">16 </span>    <span class="hid">ScheduledFiber</span>[] <span class="hid">scheduledFibers</span>;  <span class="com">// `ScheduledFiber` is a struct in [kameloso.thread]</span>
<span class="br">17 </span>    <span class="hid">ScheduledDelegate</span>[] <span class="hid">scheduledDelegates</span>;  <span class="com">// Ditto</span>
<span class="br">18 </span>    <span class="type">long</span> <span class="hid">nextFiberTimestamp</span>;
<span class="br">19 </span>    <span class="type">void</span> <span class="hid">updateScheule</span>();
<span class="br">20 </span>    <span class="type">bool</span> <span class="hid">botUpdated</span>;
<span class="br">21 </span>    <span class="type">bool</span> <span class="hid">clientUpdated</span>;
<span class="br">22 </span>    <span class="type">bool</span> <span class="hid">serverUpdated</span>;
<span class="br">23 </span>    <span class="type">bool</span> <span class="hid">settingsUpdated</span>;
<span class="br">24 </span>    <span class="type">bool</span>* <span class="hid">abort</span>;
<span class="br">25 </span>}</pre><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.client.html">kameloso.plugins.common.core.IRCPluginState.client</a> houses information about
        the client itself, such as your nickname and other things related to an
        IRC client.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.server.html">kameloso.plugins.common.core.IRCPluginState.server</a> houses information about
        the server you're connected to.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.bot.html">kameloso.plugins.common.core.IRCPluginState.bot</a> houses information about
        things that relate to an IRC bot, like which channels to join, which
        home channels to operate in, the list of administrator accounts, etc.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.settings.html">kameloso.plugins.common.core.IRCPluginState.settings</a> is a copy of the
        &quot;global&quot; <a class="xref" href="kameloso.kameloso.CoreSettings.html">kameloso.kameloso.CoreSettings</a>, which contains information
        about how the bot should output text, whether or not to always save to
        disk upon program exit, and some other program-wide settings.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.connSettings.html">kameloso.plugins.common.core.IRCPluginState.connSettings</a> is like <tt class="inline-code">settings</tt>,
        except for values relating to the connection to the server; whether
        to use IPv6, paths to any certificates, and the such.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.mainThread.html">kameloso.plugins.common.core.IRCPluginState.mainThread</a> is the *thread ID* of
        the thread running the main loop. We indirectly use it to send strings to
        the server by way of concurrency messages, but it is usually not something
        you will have to deal with directly.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.users.html">kameloso.plugins.common.core.IRCPluginState.users</a> is an associative array
        keyed with users' nicknames. The value to that key is an
        <a class="xref" href="dialect.defs.IRCUser.html">dialect.defs.IRCUser</a> representing that user in terms of nickname,
        address, ident, and services account name. This is a way to keep track of
        users by more than merely their name. It is however not saved at the end
        of the program; it is merely state and transient.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.channels.html">kameloso.plugins.common.core.IRCPluginState.channels</a> is another associative
        array, this one with all the known channels keyed by their names. This
        way we can access detailed information about any given channel, knowing
        only their name.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.replays.html">kameloso.plugins.common.core.IRCPluginState.replays</a> is also an
        associative array into which we place <a class="xref" href="kameloso.plugins.common.core.Replay.html">kameloso.plugins.common.core.Replay</a>s.
        The main loop will pick up on these and call WHOIS on the nickname in the key.
        A <a class="xref" href="kameloso.plugins.common.core.Replay.html">kameloso.plugins.common.core.Replay</a> is otherwise just an
        <a class="xref" href="dialect.defs.IRCEvent.html">dialect.defs.IRCEvent</a> to be played back when the WHOIS results
        return, as well as a function pointer to call with that event. This is
        all wrapped in a function <a class="xref" href="kameloso.plugins.common.base.enqueue.html">kameloso.plugins.common.base.enqueue</a>, with the
        queue management handled behind the scenes.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.hasReplays.html">kameloso.plugins.common.core.IRCPluginState.hasReplays</a> is merely a bool
        of whether or not there currently are any <a class="xref" href="kameloso.plugins.common.core.Replay.html">kameloso.plugins.common.core.Replay</a>s
        in <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.replays.html">kameloso.plugins.common.core.IRCPluginState.replays</a>, cached to avoid
        associative array length lookups.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.repeats.html">kameloso.plugins.common.core.IRCPluginState.repeats</a> is an array of
        <a class="xref" href="kameloso.plugins.common.core.Repeat.html">kameloso.plugins.common.core.Repeat</a>s, which is instrumental in repeating
        events from the context of the main event loop. This allows us to update
        information in the event, such as details on its sender, before repeating
        it again. This can only be done outside of plugins.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.awaitingFibers.html">kameloso.plugins.common.core.IRCPluginState.awaitingFibers</a> is an associative
        array of <a class="xref" href="core.thread.fiber.Fiber.html">core.thread.fiber.Fiber</a>s keyed by <a class="xref" href="kameloso.ircdefs.IRCEvent.Type.html">kameloso.ircdefs.IRCEvent.Type</a>s.
        Fibers in the array of a particular event type will be executed the next
        time such an event is incoming. Think of it as Fiber callbacks.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.awaitingDelegates.html">kameloso.plugins.common.core.IRCPluginState.awaitingDelegates</a> is literally
        an array of callback delegates, to be triggered when an event of a
        matching type comes along.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.scheduledFibers.html">kameloso.plugins.common.core.IRCPluginState.scheduledFibers</a> is also an array of
        <a class="xref" href="core.thread.fiber.Fiber.html">core.thread.fiber.Fiber</a>s, but not an associative one keyed on event types.
        Instead they are tuples of a <a class="xref" href="core.thread.fiber.Fiber.html">core.thread.fiber.Fiber</a> and a <tt class="inline-code">long</tt>
        timestamp of when they should be run.
        Use <a class="xref" href="kameloso.plugins.common.delayFiber.html">kameloso.plugins.common.delayFiber</a> to enqueue, or
        <a class="xref" href="kameloso.plugins.common.delayFiberMsecs.html">kameloso.plugins.common.delayFiberMsecs</a> for greater granularity.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.scheduledDelegates.html">kameloso.plugins.common.core.IRCPluginState.scheduledDelegates</a> is likewise an
        array of delegates, to be triggered at a later point in time.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.nextScheduledTimestamp.html">kameloso.plugins.common.core.IRCPluginState.nextScheduledTimestamp</a> is also a
        UNIX timestamp, here of when the next <a class="xref" href="kameloso.thread.ScheduledFiber.html">kameloso.thread.ScheduledFiber</a> in
        <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.scheduledFibers.html">kameloso.plugins.common.core.IRCPluginState.scheduledFibers</a> *or* the next
        <a class="xref" href="kameloso.thread.ScheduledDelegate.html">kameloso.thread.ScheduledDelegate</a> in
        <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.scheduledDelegates.html">kameloso.plugins.common.core.IRCPluginState.scheduledDelegates</a> is due to be
        processed. Caching it here means we won't have to go through the arrays
        to find out as often.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.updateSchedule.html">kameloso.plugins.common.core.IRCPluginState.updateSchedule</a> merely iterates all
        scheduled fibers and delegates, caching the time at which the next one
        should trigger.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.botUpdated.html">kameloso.plugins.common.core.IRCPluginState.botUpdated</a> is set when
        <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.bot.html">kameloso.plugins.common.core.IRCPluginState.bot</a> was updated during parsing
        and/or postprocessing. It is merely for internal use.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.clientUpdated.html">kameloso.plugins.common.core.IRCPluginState.clientUpdated</a> is likewise set when
        <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.client.html">kameloso.plugins.common.core.IRCPluginState.client</a> was updated during parsing
        and/or postprocessing. Ditto.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.serverUpdated.html">kameloso.plugins.common.core.IRCPluginState.serverUpdated</a> is likewise set when
        <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.server.html">kameloso.plugins.common.core.IRCPluginState.server</a> was updated during parsing
        and/or postprocessing. Ditto.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.settingsUpdated.html">kameloso.plugins.common.core.IRCPluginState.settingsUpdated</a> is likewise set when
        <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.settings.html">kameloso.plugins.common.core.IRCPluginState.settings</a> was updated during parsing
        and/or postprocessing. Ditto.</p><p>* <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.abort.html">kameloso.plugins.common.core.IRCPluginState.abort</a> is a pointer to the global
        abort bool. When this is set, it signals the rest of the program that we
        want to terminate cleanly.</p></div></div></div><div class="annotated-prototype"><div class="aggregate-prototype"><div class="attributes"><div class="versions-container">version(WithPlugins &amp;&amp; WithSeenPlugin)</div></div><span class="builtin-type">class</span> SeenPlugin  : <a class="xref parent-class" href="kameloso.plugins.common.core.IRCPlugin.html">IRCPlugin</a>  {<div class="aggregate-member"><a href="kameloso.plugins.seen.SeenPlugin.seenSettings.html"><div class="attributes">private </div><tt class="highlighted"><span class="hid">SeenSettings</span></tt> <span class="name">seenSettings</span>;</a></div><div class="aggregate-member"><a href="kameloso.plugins.seen.SeenPlugin.seenUsers.html"><div class="attributes">private </div><tt class="highlighted"><span class="type">long</span>[<span class="type">string</span>]</tt> <span class="name">seenUsers</span>;</a></div><div class="aggregate-member"><a href="kameloso.plugins.seen.SeenPlugin.seenFile.html"><div class="attributes">private <div class="uda">@<span class="name" data-ident="Resource">Resource</span> </div></div><tt class="highlighted"><span class="type">string</span></tt> <span class="name">seenFile</span>;</a></div><div class="aggregate-member"><a href="kameloso.plugins.seen.SeenPlugin.timeBetweenSaves.html"><div class="attributes">private </div><span class="builtin-type">enum</span> <span class="name">timeBetweenSaves</span>;</a></div><div class="aggregate-member"><a href="kameloso.plugins.seen.SeenPlugin.__anonymous.1.html"><tt class="highlighted"><span class="kwrd">mixin</span> <span class="hid">IRCPluginImpl</span> </tt>;</a></div><div class="aggregate-member"><a href="kameloso.plugins.seen.SeenPlugin.__anonymous.2.html"><tt class="highlighted"><span class="kwrd">mixin</span> <span class="hid">MessagingProxy</span> </tt>;</a></div>}</div></div><h2 id="members"><a class="header-anchor" href="#members">Members</a></h2><h3 class="member-list-header hide-from-toc" id="manifest constant"><a class="header-anchor" href="#manifest constant">Manifest constants</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.seen.SeenPlugin.timeBetweenSaves.html">timeBetweenSaves</a><div class="simplified-prototype" style="max-width: 24ch;"><span class="builtin-type">enum</span> <span class="name">timeBetweenSaves</span>;</div></dt><dd><div><p>The amount of seconds after which seen users should be saved to disk.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="mixin"><a class="header-anchor" href="#mixin">Mixins</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.seen.SeenPlugin.__anonymous.1.html">__anonymous</a><div class="simplified-prototype" style="max-width: 22ch;"><tt class="highlighted"><span class="kwrd">mixin</span> <span class="hid">IRCPluginImpl</span> </tt></div></dt><dd><div><p>This mixes in functions that fully implement an
        <a class="xref" href="kameloso.plugins.common.core.IRCPlugin.html">kameloso.plugins.common.core.IRCPlugin</a>. They don't do much by themselves
        other than call the module's functions.</p></div></dd><dt><a href="kameloso.plugins.seen.SeenPlugin.__anonymous.2.html">__anonymous</a><div class="simplified-prototype" style="max-width: 23ch;"><tt class="highlighted"><span class="kwrd">mixin</span> <span class="hid">MessagingProxy</span> </tt></div></dt><dd><div><p>This mixin adds shorthand functions to proxy calls to
        <a class="xref" href="kameloso.messaging.html">kameloso.messaging</a> functions, *partially applied* with the main thread ID,
        so they can easily be called with knowledge only of the plugin symbol.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="variable"><a class="header-anchor" href="#variable">Variables</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.seen.SeenPlugin.seenFile.html">seenFile</a><div class="simplified-prototype" style="max-width: 17ch;"><tt class="highlighted"><span class="type">string</span></tt> <span class="name">seenFile</span>;</div></dt><dd><div><p>The filename to which to persistently store our list of seen users
        between executions of the program.</p></div></dd><dt><a href="kameloso.plugins.seen.SeenPlugin.seenSettings.html">seenSettings</a><div class="simplified-prototype" style="max-width: 28ch;"><tt class="highlighted"><span class="hid">SeenSettings</span></tt> <span class="name">seenSettings</span>;</div></dt><dd><div><p>An instance of *settings* for the Seen plugin. We will define this
        later. The members of it will be saved to and loaded from the
        configuration file, for use in our module.</p></div></dd><dt><a href="kameloso.plugins.seen.SeenPlugin.seenUsers.html">seenUsers</a><div class="simplified-prototype" style="max-width: 25ch;"><tt class="highlighted"><span class="type">long</span>[<span class="type">string</span>]</tt> <span class="name">seenUsers</span>;</div></dt><dd><div><p>Our associative array (AA) of seen users; the dictionary keyed with
        users' nicknames and with values that are UNIX timestamps, denoting when
        that user was last *seen* online.</p></div></dd></dl><h2 id="mixed-in-members"><a class="header-anchor" href="#mixed-in-members">Mixed In Members</a></h2><h3 id="from-mixin-ircpluginimpl-">From <tt class="highlighted"><span class="kwrd">mixin</span> <span class="hid">IRCPluginImpl</span> </tt></h3><dl class="member-list native"><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.mixinSentinel.html">mixinSentinel</a><div class="simplified-prototype" style="max-width: 20ch;"><span class="builtin-type">enum</span> <span class="name">mixinSentinel</span>;</div></dt><dd><div><p>Symbol needed for the mixin constraints to work.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.isEnabled.html">isEnabled</a><div class="simplified-prototype" style="max-width: 17ch;"><tt class="highlighted"><span class="type">bool</span></tt> <span class="name">isEnabled</span>()</div></dt><dd><div><p>Introspects the current plugin, looking for a <a class="xref" href="kameloso.plugins.common.core.Settings.html">Settings</a>-annotated struct
        member that has a bool annotated with <a class="xref" href="kameloso.plugins.common.core.Enabler.html">Enabler</a>, which denotes it as the
        bool that toggles a plugin on and off.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.allow.html">allow</a><div class="simplified-prototype" style="max-width: 67ch;"><tt class="highlighted"><span class="hid">FilterResult</span></tt> <span class="name">allow</span>(IRCEvent event, PermissionsRequired perms)</div></dt><dd><div><p>Judges whether an event may be triggered, based on the event itself and
        the annotated <a class="xref" href="kameloso.plugins.common.core.PermissionsRequired.html">PermissionsRequired</a> of the handler in question. Wrapper function
        that merely calls <a class="xref" href="kameloso.plugins.common.core.IRCPluginImpl.allowImpl.html">allowImpl</a>. The point behind it is to make something
        that can be overridden and still allow it to call the original logic (below).</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.allowImpl.html">allowImpl</a><div class="simplified-prototype" style="max-width: 71ch;"><tt class="highlighted"><span class="hid">FilterResult</span></tt> <span class="name">allowImpl</span>(IRCEvent event, PermissionsRequired perms)</div></dt><dd><div><p>Judges whether an event may be triggered, based on the event itself and
        the annotated <a class="xref" href="kameloso.plugins.common.core.PermissionsRequired.html">PermissionsRequired</a> of the handler in question. Implementation function.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.onEvent.html">onEvent</a><div class="simplified-prototype" style="max-width: 30ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onEvent</span>(IRCEvent event)</div></dt><dd><div><p>Pass on the supplied <a class="xref" href="dialect.defs.IRCEvent.html">dialect.defs.IRCEvent</a> to <a class="xref" href="kameloso.plugins.common.core.IRCPluginImpl.onEventImpl.html">onEventImpl</a>.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.onEventImpl.html">onEventImpl</a><div class="simplified-prototype" style="max-width: 39ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onEventImpl</span>(IRCEvent origEvent)</div></dt><dd><div><p>Pass on the supplied <a class="xref" href="dialect.defs.IRCEvent.html">dialect.defs.IRCEvent</a> to module-level functions
        annotated with the matching <a class="xref" href="dialect.defs.IRCEvent.Type.html">dialect.defs.IRCEvent.Type</a>s.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.this.html">this</a><div class="simplified-prototype" style="max-width: 28ch;"><span class="lang-feature name">this</span>(IRCPluginState state)</div></dt><dd><div><p>Basic constructor for a plugin.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.postprocess.html">postprocess</a><div class="simplified-prototype" style="max-width: 35ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">postprocess</span>(IRCEvent event)</div></dt><dd><div><p>Lets a plugin modify an <a class="xref" href="dialect.defs.IRCEvent.html">dialect.defs.IRCEvent</a> while it's begin
        constructed, before it's finalised and passed on to be handled.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.initResources.html">initResources</a><div class="simplified-prototype" style="max-width: 22ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">initResources</span>()</div></dt><dd><div><p>Writes plugin resources to disk, creating them if they don't exist.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.deserialiseConfigFrom.html">deserialiseConfigFrom</a><div class="simplified-prototype" style="max-width: 122ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">deserialiseConfigFrom</span>(string configFile, string[][string] missingEntries, string[][string] invalidEntries)</div></dt><dd><div><p>Loads configuration for this plugin from disk.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.setSettingByName.html">setSettingByName</a><div class="simplified-prototype" style="max-width: 56ch;"><tt class="highlighted"><span class="type">bool</span></tt> <span class="name">setSettingByName</span>(string setting, string value)</div></dt><dd><div><p>Change a plugin's <a class="xref" href="kameloso.plugins.common.core.Settings.html">Settings</a>-annotated settings struct member by their
        string name.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.printSettings.html">printSettings</a><div class="simplified-prototype" style="max-width: 22ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">printSettings</span>()</div></dt><dd><div><p>Prints the plugin's <a class="xref" href="kameloso.plugins.common.core.Settings.html">Settings</a>-annotated settings struct.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.serialiseConfigInto.html">serialiseConfigInto</a><div class="simplified-prototype" style="max-width: 52ch;"><tt class="highlighted"><span class="type">bool</span></tt> <span class="name">serialiseConfigInto</span>(Appender!(char[]) sink)</div></dt><dd><div><p>Gathers the configuration text the plugin wants to contribute to the
        configuration file.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.start.html">start</a><div class="simplified-prototype" style="max-width: 13ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">start</span>()</div></dt><dd><div><p>Runs early after-connect routines, immediately after connection has been
        established.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.teardown.html">teardown</a><div class="simplified-prototype" style="max-width: 16ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">teardown</span>()</div></dt><dd><div><p>De-initialises the plugin.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.name.html">name</a><div class="simplified-prototype" style="max-width: 14ch;"><tt class="highlighted"><span class="type">string</span></tt> <span class="name">name</span>()</div></dt><dd><div><p>Returns the name of the plugin. (Technically it's the name of the module.)</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.commands.html">commands</a><div class="simplified-prototype" style="max-width: 48ch;"><tt class="highlighted"><span class="hid">IRCPlugin</span>.<span class="hid">CommandMetadata</span>[<span class="type">string</span>]</tt> <span class="name">commands</span>()</div></dt><dd><div><p>Collects all <a class="xref" href="kameloso.plugins.common.core.BotCommand.html">BotCommand</a> command words and <a class="xref" href="kameloso.plugins.common.core.BotRegex.html">BotRegex</a> regex expressions
        that this plugin offers at compile time, then at runtime returns them
        alongside their <a class="xref" href="kameloso.plugins.common.core.Description.html">Description</a>s and their visibility, as an associative
        array of <a class="xref" href="kameloso.plugins.common.core.IRCPlugin.CommandMetadata.html">IRCPlugin.CommandMetadata</a>s keyed by command name strings.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.reload.html">reload</a><div class="simplified-prototype" style="max-width: 14ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">reload</span>()</div></dt><dd><div><p>Reloads the plugin, where such makes sense.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPluginImpl.onBusMessage.html">onBusMessage</a><div class="simplified-prototype" style="max-width: 55ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onBusMessage</span>(string header, Sendable content)</div></dt><dd><div><p>Proxies a bus message to the plugin, to let it handle it (or not).</p></div></dd></dl><h3 id="from-mixin-messagingproxy-">From <tt class="highlighted"><span class="kwrd">mixin</span> <span class="hid">MessagingProxy</span> </tt></h3><dl class="member-list native"><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.mixinSentinel.html">mixinSentinel</a><div class="simplified-prototype" style="max-width: 20ch;"><span class="builtin-type">enum</span> <span class="name">mixinSentinel</span>;</div></dt><dd><div><p>Symbol needed for the mixin constraints to work.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.hasMessagingProxy.html">hasMessagingProxy</a><div class="simplified-prototype" style="max-width: 25ch;"><span class="builtin-type">enum</span> <span class="name">hasMessagingProxy</span>;</div></dt><dd><div><p>Flag denoting that <a class="xref" href="kameloso.plugins.common.mixins.MessagingProxy.html">MessagingProxy</a> has been mixed in.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.chan.html">chan</a><div class="simplified-prototype" style="max-width: 121ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">chan</span>(string channelName, string content, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Sends a channel message.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.query.html">query</a><div class="simplified-prototype" style="max-width: 118ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">query</span>(string nickname, string content, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Sends a private query message to a user.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.privmsg.html">privmsg</a><div class="simplified-prototype" style="max-width: 138ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">privmsg</span>(string channel, string nickname, string content, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Sends either a channel message or a private query message depending on
        the arguments passed to it.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.emote.html">emote</a><div class="simplified-prototype" style="max-width: 122ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">emote</span>(string emoteTarget, string content, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Sends an <tt class="inline-code">ACTION</tt> &quot;emote&quot; to the supplied target (nickname or channel).</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.mode.html">mode</a><div class="simplified-prototype" style="max-width: 139ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">mode</span>(string channel, const(char)[] modes, string content, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Sets a channel mode.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.topic.html">topic</a><div class="simplified-prototype" style="max-width: 117ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">topic</span>(string channel, string content, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Sets the topic of a channel.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.invite.html">invite</a><div class="simplified-prototype" style="max-width: 119ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">invite</span>(string channel, string nickname, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Invites a user to a channel.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.join.html">join</a><div class="simplified-prototype" style="max-width: 112ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">join</span>(string channel, string key, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Joins a channel.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.kick.html">kick</a><div class="simplified-prototype" style="max-width: 134ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">kick</span>(string channel, string nickname, string reason, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Kicks a user from a channel.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.part.html">part</a><div class="simplified-prototype" style="max-width: 115ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">part</span>(string channel, string reason, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Leaves a channel.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.quit.html">quit</a><div class="simplified-prototype" style="max-width: 48ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">quit</span>(string reason, Flag!&quot;quiet&quot; quiet)</div></dt><dd><div><p>Disconnects from the server, optionally with a quit reason.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.whois.html">whois</a><div class="simplified-prototype" style="max-width: 123ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">whois</span>(string nickname, Flag!&quot;force&quot; force, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Queries the server for WHOIS information about a user.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.raw.html">raw</a><div class="simplified-prototype" style="max-width: 94ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">raw</span>(string line, Flag!&quot;quiet&quot; quiet, Flag!&quot;background&quot; background, string caller)</div></dt><dd><div><p>Sends text to the server, verbatim.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.MessagingProxy.immediate.html">immediate</a><div class="simplified-prototype" style="max-width: 68ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">immediate</span>(string line, Flag!&quot;quiet&quot; quiet, string caller)</div></dt><dd><div><p>Sends raw text to the server, verbatim, bypassing all queues and
        throttling delays.</p></div></dd></dl><h2 id="inherited-members"><a class="header-anchor" href="#inherited-members">Inherited Members</a></h2><h3 id="inherited-from-kameloso.plugins.common.core.IRCPlugin"><a class="header-anchor" href="#inherited-from-kameloso.plugins.common.core.IRCPlugin">From IRCPlugin</a></h3><dl class="member-list inherited"><dt><a href="kameloso.plugins.common.core.IRCPlugin.CommandMetadata.html">CommandMetadata</a><div class="simplified-prototype" style="max-width: 24ch;"><span class="builtin-type">struct</span> <span class="name">CommandMetadata</span></div></dt><dd><div><p>Metadata about a <a class="xref" href="kameloso.plugins.common.core.BotCommand.html">BotCommand</a>- and/or <a class="xref" href="kameloso.plugins.common.core.BotRegex.html">BotRegex</a>-annotated event handler.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.state.html">state</a><div class="simplified-prototype" style="max-width: 23ch;"><tt class="highlighted"><span class="hid">IRCPluginState</span></tt> <span class="name">state</span>;</div></dt><dd><div><p>An <a class="xref" href="kameloso.plugins.common.core.IRCPluginState.html">IRCPluginState</a> instance containing variables and arrays that represent
        the current state of the plugin. Should generally be passed by reference.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.postprocess.html">postprocess</a><div class="simplified-prototype" style="max-width: 29ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">postprocess</span>(IRCEvent )</div></dt><dd><div><p>Executed to let plugins modify an event mid-parse.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.onEvent.html">onEvent</a><div class="simplified-prototype" style="max-width: 25ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onEvent</span>(IRCEvent )</div></dt><dd><div><p>Executed upon new IRC event parsed from the server.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.initResources.html">initResources</a><div class="simplified-prototype" style="max-width: 22ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">initResources</span>()</div></dt><dd><div><p>Executed when the plugin is requested to initialise its disk resources.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.deserialiseConfigFrom.html">deserialiseConfigFrom</a><div class="simplified-prototype" style="max-width: 80ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">deserialiseConfigFrom</span>(string , string[][string] , string[][string] )</div></dt><dd><div><p>Read serialised configuration text into the plugin's settings struct.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.serialiseConfigInto.html">serialiseConfigInto</a><div class="simplified-prototype" style="max-width: 48ch;"><tt class="highlighted"><span class="type">bool</span></tt> <span class="name">serialiseConfigInto</span>(Appender!(char[]) )</div></dt><dd><div><p>Executed when gathering things to put in the configuration file.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.setSettingByName.html">setSettingByName</a><div class="simplified-prototype" style="max-width: 42ch;"><tt class="highlighted"><span class="type">bool</span></tt> <span class="name">setSettingByName</span>(string , string )</div></dt><dd><div><p>Executed during start if we want to change a setting by its string name.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.start.html">start</a><div class="simplified-prototype" style="max-width: 13ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">start</span>()</div></dt><dd><div><p>Executed when connection has been established.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.printSettings.html">printSettings</a><div class="simplified-prototype" style="max-width: 22ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">printSettings</span>()</div></dt><dd><div><p>Executed when we want a plugin to print its Settings struct.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.teardown.html">teardown</a><div class="simplified-prototype" style="max-width: 16ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">teardown</span>()</div></dt><dd><div><p>Executed during shutdown of a connection session.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.name.html">name</a><div class="simplified-prototype" style="max-width: 14ch;"><tt class="highlighted"><span class="type">string</span></tt> <span class="name">name</span>()</div></dt><dd><div><p>Returns the name of the plugin, sliced off the module name.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.commands.html">commands</a><div class="simplified-prototype" style="max-width: 37ch;"><tt class="highlighted"><span class="hid">CommandMetadata</span>[<span class="type">string</span>]</tt> <span class="name">commands</span>()</div></dt><dd><div><p>Returns an array of the descriptions of the commands a plugin offers.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.reload.html">reload</a><div class="simplified-prototype" style="max-width: 14ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">reload</span>()</div></dt><dd><div><p>Reloads the plugin, where such is applicable.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.onBusMessage.html">onBusMessage</a><div class="simplified-prototype" style="max-width: 48ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onBusMessage</span>(string , Sendable content)</div></dt><dd><div><p>Executed when a bus message arrives from another plugin.</p></div></dd><dt><a href="kameloso.plugins.common.core.IRCPlugin.isEnabled.html">isEnabled</a><div class="simplified-prototype" style="max-width: 17ch;"><tt class="highlighted"><span class="type">bool</span></tt> <span class="name">isEnabled</span>()</div></dt><dd><div><p>Returns whether or not the plugin is enabled in its configuration section.</p></div></dd></dl><div></div></div>
		<div id="page-nav"><a class="parent" href="kameloso.html">kameloso</a> <a class="parent" href="kameloso.plugins.html">plugins</a> <a class="parent" href="kameloso.plugins.seen.html">seen</a> 
		<span class="type-separator">classes</span><ul><li><a class="class current" href="kameloso.plugins.seen.SeenPlugin.html">SeenPlugin</a></li></ul><span class="type-separator">functions</span><ul><li><a class="function" href="kameloso.plugins.seen.initResources.html">initResources</a></li><li><a class="function" href="kameloso.plugins.seen.loadSeen.html">loadSeen</a></li><li><a class="function" href="kameloso.plugins.seen.onBusMessage.html">onBusMessage</a></li><li><a class="function" href="kameloso.plugins.seen.onCommandSeen.html">onCommandSeen</a></li><li><a class="function" href="kameloso.plugins.seen.onEndOfList.html">onEndOfList</a></li><li><a class="function" href="kameloso.plugins.seen.onNamesReply.html">onNamesReply</a></li><li><a class="function" href="kameloso.plugins.seen.onNick.html">onNick</a></li><li><a class="function" href="kameloso.plugins.seen.onQuit.html">onQuit</a></li><li><a class="function" href="kameloso.plugins.seen.onSomeAction.html">onSomeAction</a></li><li><a class="function" href="kameloso.plugins.seen.onWHOReply.html">onWHOReply</a></li><li><a class="function" href="kameloso.plugins.seen.onWelcome.html">onWelcome</a></li><li><a class="function" href="kameloso.plugins.seen.reload.html">reload</a></li><li><a class="function" href="kameloso.plugins.seen.saveSeen.html">saveSeen</a></li><li><a class="function" href="kameloso.plugins.seen.teardown.html">teardown</a></li><li><a class="function" href="kameloso.plugins.seen.updateAllObservedUsers.html">updateAllObservedUsers</a></li><li><a class="function" href="kameloso.plugins.seen.updateUser.html">updateUser</a></li></ul><span class="type-separator">mixins</span><ul><li><a class="mixin" href="kameloso.plugins.seen.__anonymous.1.html">__anonymous</a></li></ul><span class="type-separator">structs</span><ul><li><a class="struct" href="kameloso.plugins.seen.SeenSettings.html">SeenSettings</a></li></ul></div>
	</div>
	<div id="page-footer">Page generated by <a href="https://github.com/adamdruppe/adrdox">adrdox</a></div>
</body>
</html>